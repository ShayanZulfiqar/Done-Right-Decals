"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9556],{97809:function(t,e,a){a.r(e),a.d(e,{default:function(){return x}});var i=a(47689),n=a.n(i),r=a(44631),o=a(47050),l=a(23433),c=a(5696),s=a(61856),d=a(8465),u=a(23262),p=a(12224),y=a(32265),v=a(39580),m=a(65373),g=a(71083),f=a(67727);let C=function(){function t(){this.CartClientBaseUrl="https://vistacart.orders.vpsvc.com"}var e=t.prototype;return e.addToCart=async function(t,e){const a=this.getCartItemUrl(e);if(a)try{await g.A.post(a,{items:t},{headers:{authorization:e.authorizationHeader}})}catch(i){const t=i;y.V.instance.error(`Failed to add to cart: ${t.stack}`)}},e.getCartItemUrl=function(t){return t.locale&&t.shopperId?`${this.CartClientBaseUrl}/tenants/${t.vistacartTenant}/carts/${t.shopperId}/v2/items?requestor=${f.A.requestor}&locale=${t.locale}`:(y.V.instance.error("Failed to add to cart. Missing locale and shopperId information."),"")},t}(),h=function(){function t(){}return t.prototype.addToCart=async function(t,e,a,i,n,r,o,l,c,s,d,u){const p={shopperId:s,locale:c,authorizationHeader:d,vistacartTenant:u},y={design:{livePreviewUrl:l},merchandisableQuantities:{list:r},product:{productKey:t,productVersion:a,productDisplayName:e,selectedAttributes:Object.entries(n).reduce(((t,e)=>{var a,n,r;let o,l,[c,s]=e;i&&i.properties&&(o=i.properties.find((t=>t.key===c)),o&&o.options&&(l=o.options.find((t=>1===Object.keys(t.coreModelMappings).length&&Object.keys(t.coreModelMappings).includes(c)&&t.coreModelMappings[`${c}`]===s))));const d={key:c,value:s,keyDisplayName:null===(a=o)||void 0===a?void 0:a.name,valueDisplayName:null!==(n=null===(r=l)||void 0===r?void 0:r.name)&&void 0!==n?n:s};return t.push(d),t}),[])},quantity:o},v=new C;await v.addToCart([y],p)},t}();var I=a(85827),w=a(55367),U=a(74441),b=a(96148),D=a(39843),O=a(76676);const A=p.bu,M=new A.config(f.A.requestor),S=new A.serviceClient(M),k=async(t,e)=>{const{productKey:a,locale:i,country:n,quantity:r,productName:o,selections:l,imageUrl:c,productPageMerchandisingDetail:s,vistacartTenant:d,initialSelections:u,mpvId:p,version:g,prices:f,pageSection:C,tenant:O,isMobile:A,productBuilderOptions:M,initialPrices:k}=t,P=new I.A,q=new v.default.WebAuth,T=q.getAuthorizationHeader(),_=q.getCanonicalId(),x={productId:a,market:n,selectedOptions:(0,m.yO)()||l,version:g},V=await(0,U.c)(x);if(!V)return void y.V.instance.error("Failed to get default attributes. Failed to add to cart.");const F={productKey:a,providedValues:V},L=await S.validateCompatibility(F),$=await S.getMerchandisableQuantities(a,V);if(!L)return void y.V.instance.error("Failed to add to cart. Incompatible selections from URL sel query parameter.");if(r&&!$.includes(r))return void y.V.instance.error("Failed to add to cart. Incompatible quantity from URL qty query parameter.");const K=r||$[0];await(new h).addToCart(a,o,g,s,V,$,K,c,i,_,T,d||"");try{const t=await(0,b.Th)({tenant:O,culture:i,productKey:a,version:g,optionValues:l,quantity:r,flowAction:"addtocart",optimizelyEndUserId:(0,D.F)(),isMobile:A});w.Ay.trackCtaTiming(P.stop()),null!=t&&t.url?(w.Ay.trackAddToCart({pageSection:C,mpvId:p,selections:l,productKey:a,selectedQuantity:K,listPrice:f[K].totalListPrice.untaxed,price:f[K].totalDiscountedPrice.untaxed,version:g}),w.Ay.trackUpdatedSelections(p,o,a,l,u,e,K,f,k,M),window.location.assign(null==t?void 0:t.url)):y.V.instance.error(`Siteflow failed to get addtocart response - Could not assign window location to add to cart url: ${JSON.stringify({locale:i,mpvId:p,selections:l,quantity:r,requestUrl:null==t?void 0:t.requestUrl})}`)}catch(N){return void y.V.instance.error(`Unable to get cart URL for locale ${i}`)}};var P=a(9244),q=a(70361),T=a(79868),_=a(99944);var x=t=>{const{customData:{flow:{type:e},isPrimaryCta:a,buttonIndex:p,showDescription:v,isDesignUploaded:m}}=t,{pluginData:g}=(0,i.useContext)(r.t),{locale:f,country:C,tenant:h,mpv:I,ctaOverrideEntries:w,vistacartTenant:U,heroGallery:b,productBuilderOptions:D}=(0,i.useContext)(o.FD),{temporarilyOutOfStock:A,prices:M,initialPrices:S}=(0,i.useContext)(l.Y),{selections:x,clientSideStateInitialized:V,initialSelections:F,initialQuantity:L,selectedQuantity:$}=(0,i.useContext)(c.z),{selectedReferentialImage:K}=(0,i.useContext)(q.EZ),{isMobile:N}=(0,_.t)((0,T.OO)()),{mpvId:B,coreProductId:E,version:z,name:H}=I,R=V&&!A,Q=new P.j(I),j=Q.getProductPageMerchandisingDetails(),{actualCtaText:G,actualCtaDescription:J,actualCtaIcon:W}=(0,s.M)(g,w,e,m,a),Y=(t=>{var e,a;const{heroGallery:i,defaultMpvImageUrl:n,selectedReferentialImage:r}=t,o=r;return(null==o||null===(e=o.cloudinaryImage)||void 0===e?void 0:e.mobileCloudinaryUrl)||(null==o||null===(a=o.cloudinaryImage)||void 0===a?void 0:a.cloudinaryUrl)||n||(0,O.Ny)(i)||""})({heroGallery:b,defaultMpvImageUrl:Q.getDefaultProductImageUrl(),selectedReferentialImage:K}),Z=(0,i.useCallback)((t=>(async(t,e,a)=>{t.preventDefault();try{await k(e,a)}catch(i){const t=i;y.V.instance.error(`Cannot proceed from product page: Failed to add to cart - ${t.stack}`)}})(t,{productKey:E,locale:f,country:C,tenant:h,quantity:$,productName:H,selections:x||{},imageUrl:Y,productPageMerchandisingDetail:j,vistacartTenant:null==U?void 0:U.tenantId,initialSelections:F,mpvId:B,pageSection:d.O.pageSection,prices:M,version:z,isMobile:N,productBuilderOptions:D,initialPrices:S},L)),[B,E,f,$,H,Y,U,j,x,F,d.O,p,e,F,M,z,N]);return n().createElement(u.F,{onClickHandler:Z,disabled:!R,buttonKey:e,text:G,description:v?J:"",iconComponent:W,textButtonProps:{skin:a?"primary":"secondary"},pageSection:d.O.pageSection,position:p})}}}]);
//# sourceMappingURL=components-Ctas-AddToCartCta-067d1c1d94e4434f5826.js.map