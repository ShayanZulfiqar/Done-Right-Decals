var It=Object.defineProperty;var bt=(e,t,s)=>t in e?It(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var k=(e,t,s)=>(bt(e,typeof t!="symbol"?t+"":t,s),s);import{r as w,bt as Le,aT as tt,aM as rt,j as c,T as $,B as De,at as st,bu as nt,h as Lt,bv as Ut,bw as Ft,bx as At,aW as kt,by as Nt,bz as Tt,bA as Mt,bB as Gt,bC as Ue,bD as $t,bE as jt,X as Ht,bF as Vt,bG as Wt,bH as zt,c as L,bI as at,aR as ot,bJ as Fe,bK as Qt,bL as Bt,I as qt,ao as Kt,ar as Xt,aU as Jt,ap as Zt,aq as Yt,as as er,bM as tr,w as G,bN as it,a as oe,bO as rr,bP as sr,aK as nr,bQ as ar,e as or,al as ir,bR as cr,bS as Ae,bT as ie,bU as ce,bV as le,am as lr,b8 as ur,bW as j}from"./vendor-df60438d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();const dr="en-us",ct=w.createContext(dr),gr={prefix:"<",suffix:String.raw`\s?\/>`};function pr(e,t,s,r){if(t){const{prefix:n,suffix:a}=r??gr,o=String.raw`${n}([^>\s]+)${a}`;return e.replace(new RegExp(o,"gi"),(i,l)=>{if(!(l in t)&&!s)throw new Error(`${i} doesn't exist in message ${e}`);return t[l]})}return e}const mr=w.createContext({messages:{}});function hr(e){return function(s,r,n){const a=e[s];if(a===void 0)throw new ReferenceError(`Could not find Intl message: ${s}`);return pr(a,r,void 0,n)}}const V=()=>{const{messages:e}=w.useContext(mr);return hr(e)},ke=window.__GALLERY_CONFIG__,fr="/packaging-studio",Ne=e=>{const{path:t,locale:s,quantity:r,mpvId:n,productKey:a,selectedOptions:o,fullBleedElected:i,impressionId:l,galleryFullbleedEngagementId:u}=e,g=ke.client.culturePrefix[s.toLowerCase()];let d="";if(g){const P=`/${g}`,m=t.toLocaleLowerCase().startsWith(`${P}/`),y=t.startsWith(fr);!m&&!y&&(d=P)}const h=`${ke.client.vistaprintRoot[s.toLowerCase()]}${d}${t}`,{url:f,query:p}=Le.parseUrl(h);return r&&(p.qty=r.toString()),n&&(p.mpvId=n),o&&(p.selectedOptions=JSON.stringify(o)),a&&(p.key=a),"locale"in p||(p.locale=s),i&&(p.fullBleedElected="true"),l&&(p.metadata=JSON.stringify({galleryImpressionId:l})),u&&(p.metadata=JSON.stringify({galleryFullbleedEngagementId:u})),Le.stringifyUrl({url:f,query:p})},wr=e=>{const{error:t,resetErrorBoundary:s,errorSubheader:r,retryLink:n}=e,a=tt(),o=V(),i=w.useContext(ct),l=Ne({path:"",locale:i}),u=Ne({path:"/all-products",locale:i}),g=`${o("ErrorMessage1")} <a href=${l} skin="standard">${o("ErrorMessage2")} </a> ${o("ErrorMessage3")} <a href=${u} skin="standard">${o("ErrorMessage4")} </a>.`,d=a.state,h=new URLSearchParams(a.search),f=rt.sanitize(g);return c.jsxs(c.Fragment,{children:[c.jsx($,{className:"error-header",fontSize:"x4large",fontWeight:"normal",textAlign:"center",children:o("ErrorHeader")}),c.jsx($,{className:"error-subheader",fontWeight:"normal",textAlign:"center",children:r}),c.jsx($,{className:"error-help",dangerouslySetInnerHTML:{__html:f},fontSize:"standard",fontWeight:"normal",textAlign:"center"}),n&&c.jsx("div",{className:"retry-button",children:c.jsx(De,{render:p=>c.jsx(st,{className:p.className,href:n,onClick:s,children:p.children}),skin:"primary",children:o("TryAgainCTA")})}),c.jsx($,{className:"error-guid",fontSize:"standard",fontWeight:"normal",textAlign:"center",textColor:"subtle",children:t&&"guid"in t?t.guid:d?.guid??h.get("guid")}),!1]})};wr.displayName="ErrorDisplay";const yr=window.newrelic;class Er{constructor(){k(this,"newrelic");this.newrelic=yr,this.newrelic&&!this.newrelic.addCustomAttribute&&(this.newrelic.addCustomAttribute=this.newrelic.setCustomAttribute)}recordPageAction(t,s){try{this.newrelic&&this.newrelic.addPageAction&&this.newrelic.addPageAction(t,{...s})}catch{}}recordDesignSelection(t,s){this.recordPageAction("design-selection",{selectionType:s,...t})}recordAppHydratedEvent(){if(this.newrelic){const t=(Date.now()-window.performance.timing.navigationStart)/1e3;this.recordPageAction("application-hydrated",{timing:t})}}setPageView(t,s){if(this.newrelic){for(const[r,n]of Object.entries(s))n&&this.newrelic.addCustomAttribute(r,n);this.newrelic.addCustomAttribute("culture",s.locale),this.newrelic.setPageViewName(t)}}recordImageFailure(t){this.recordPageAction("image-failure",{...t})}recordImagesLoaded(t,s){const r=window.imageResources.map(n=>n.responseEnd-n.startTime);if(r.length>3){window.imageResources=[];const n=Math.min(...r),a=Math.max(...r),o=r.reduce((i,l)=>i+l,0)/r.length;this.recordPageAction("images-loaded",{imageLoadedCount:r.length,minImageLoadedTime:n,maxImageLoadedTime:a,meanImageLoadedTime:o,textPersonalized:t,imagePersonalized:s})}}}const se=new Er,ue=window.__GALLERY_CONFIG__;function Te(e){const t=e.getIdentity(),s=e.getCanonicalId(),r=n=>e.signIn(n);return s&&t.profile?{canonicalId:s,QuantumMetricUserID:window.localStorage.getItem("QuantumMetricUserID"),signIn:r,...t}:null}const vr=(e,t)=>nt.init({culture:e,options:{redirectAfterSignOutCallback:()=>t,clientID:ue.client.deployment!=="production"?ue.client.auth.clientID:void 0,redirectUriOrigin:`${window.location.origin}${ue.client.auth.authCallbackPath}`,requireSession:!0}}),de=new nt.WebAuth,lt=w.createContext(null),cn=e=>{const{locale:t,signoutRedirectUrl:s,...r}=e,[n,a]=w.useState(null);return w.useEffect(()=>{(async()=>{await vr(t,s),de.onUserIdentityUpdate(()=>a(Te(de))),a(Te(de))})()},[t,s]),c.jsx(lt.Provider,{...r,value:n})},ln=()=>w.useContext(lt),Pr=window.__GALLERY_CONFIG__,un=["152x152","120x120","76x76","60x60"],dn=`${Lt.relative}${Ut}/${Ft(At.FAVICONS)}`,gn="rgb(#ffffff)";var ye=(e=>(e.DEFAULT="Default",e.LARGE="Large",e))(ye||{});const pn=8,mn="vistaprint",hn="VP",fn=`vp-template-favorites-${Pr.client.deployment.toLowerCase()}`,Sr=300,wn=250,yn=165,xr=206,Cr=258,En=48,Me="&nbsp;";var I=(e=>(e.QTY_FROM_PRICE="qtyFromPrice",e.AS_LOW_AS_PRICE_PER_PIECE="asLowAsPricePerPiece",e.PRICE_PER_UNIT="pricePerUnit",e.RAW_PRICE="rawPrice",e.QTY_DIFFERENTIAL_PRICE="plusOrMinus",e.DIFFERENTIAL_PRICE_PER_UNIT="plusOrMinusPerUnit",e.QTY_STARTING_AT_PRICE="qtyStartingAtPrice",e))(I||{});const ee=9800,Ge=24,ut=84e4,dt=9e5;var ne=(e=>(e.GALLERY_CONFIG_LOAD_FAILED="galleryConfigurationLoadFailed",e.GALLERY_CONFIG_METADATA_LOAD_FAILED="galleryConfigurationMetadataLoadFailed",e.CONTENT_LOAD_FAILED="contentLoadFailed",e.PREVIEW_IMAGE_FAILURE="previewImageFailure",e.FAVORITES_UPDATE_FAILED="favoritesUpdateFailed",e.LOADED_FAVORITES="loadedFavorites",e.FAVORITE_BUTTON_CLICKED="favoriteButtonClicked",e.PRODUCT_CONFIG_LOAD_FAILED="productConfigurationLoadFailed",e.QUICKVIEW_OPENED="quickViewOpened",e.VORTEX_RENDER_FAILURE="vortexFailure",e.FAVORITE_DUPLICATE_DETECTED="favoriteDuplicateDetected",e.ADD_TO_CART_SUCCESS="addToCart",e.ADD_TO_CART_FAILURE="addToCartFailure",e.IMAGE_UPLOAD_SUCCESS="imageUploadSuccess",e.IMAGE_UPLOAD_FAILURE="imageUploadFailure",e.IMAGE_PROCESSING_SUCCESS="imageProcessingSuccess",e.IMAGE_PROCESSING_FAILURE="imageProcessingFailure",e.IMAGE_LOADING_SUCCESS="imageLoadingSuccess",e.IMAGE_LOADING_FAILURE="imageLoadingFailure",e.SEGMENT_EVENT_FAILURE="segmentEventFailure",e))(ne||{}),_r=(e=>(e.PERSISTED_PHOTO_PREVIEW_DATA="PERSISTED_PHOTO_PREVIEW_DATA",e))(_r||{});const vn="selectedProduct";var Rr=(e=>(e.LOADING="LOADING",e.READY="READY",e.ERROR="ERROR",e))(Rr||{});const Pn=10,Sn="quickview-preview";var Dr=(e=>(e.INACTIVE="inactive",e.EXPERIMENT="experiment",e.ACTIVE="active",e.MOBILE="mobile",e))(Dr||{});const Ee=window.__GALLERY_CONFIG__,$e=Ee.services.global;class z{constructor(t,s){k(this,"api");k(this,"config");k(this,"debug");k(this,"loggerOrProvider");const r={...$e.keepalive,...t.keepalive};this.api=kt.create({httpAgent:new Nt(r),httpsAgent:new Tt(r),...t}),this.config=t,this.debug=Mt(`${Ee.debug.namespace}:${this.constructor.name}`),this.loggerOrProvider=s,this.decorateWithDebugging(this.api),this.attachRetryHandler(this.api),t.caching?.staleAge&&(this.api=Gt(this.api,{ttl:t.caching.staleAge*1e3}))}get logger(){return typeof this.loggerOrProvider=="function"?this.loggerOrProvider():this.loggerOrProvider}attachRetryHandler(t){const s=this.config.retry?.retries||$e.retry?.retries||3;Ue(t,{retries:s,retryDelay:r=>Ue.exponentialDelay(r)})}decorateWithDebugging(t){t.interceptors.request.use(s=>(this.debug.extend("request")({config:Ee,request:s.url}),s)),t.interceptors.response.use(s=>(this.debug.extend("response")({response:s}),s))}}const je=0;function Or(e){return"message"in e?e.message:JSON.stringify(e)}function Ir(e,t){return"status"in e&&e.status?e.status:t?"response"in t&&t.response&&t.response.status?t.response.status:"status"in t&&t.status?t.status:je:je}function He(e={}){return"responseURL"in e?e.responseURL:"path"in e?e.path:"Unknown"}function br(e){return"url"in e?e.url:"response"in e?He(e.response?.request):He(e.request)}class R extends Error{constructor(s,r){const n=Or(s);super(n);k(this,"info");k(this,"response");k(this,"requestUrl");k(this,"status");k(this,"baseUrl");"stack"in s&&s.stack?this.stack=` ${s.stack}`:typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,R),r&&r.response&&(this.response=r.response),r&&r.config&&(this.baseUrl=r.config?.baseURL),this.status=Ir(s,r),this.requestUrl=br(s),this.name="ServiceError";try{if(r){const{config:a,code:o,message:i,isAxiosError:l,stack:u}=$t(jt(r)),{url:g,method:d,baseURL:h,headers:f,params:p,timeout:P,timeoutErrorMessage:m,withCredentials:y,responseType:S,xsrfCookieName:E,xsrfHeaderName:v,maxContentLength:_,maxBodyLength:x,maxRedirects:U,socketPath:D,decompress:A}=a||{};this.info={config:{url:g,method:d,baseURL:h,headers:f,params:p,timeout:P,timeoutErrorMessage:m,withCredentials:y,responseType:S,xsrfCookieName:E,xsrfHeaderName:v,maxContentLength:_,maxBodyLength:x,maxRedirects:U,socketPath:D,decompress:A},code:o,message:i,isAxiosError:l,stack:u}}}catch(a){try{this.info||(this.info=new Error(`Failed to add info: ${a.message}`))}catch{}}}}class Lr extends R{constructor(t,s){super({status:500,...t},s),this.name="InvalidResponseError"}}const q=window.__GALLERY_CONFIG__,Ur="https://dynamichost",Fr=new RegExp("https?://[^/]+(.*)"),Ve="production",gt=Ht();function Ar(e,t){const{trace:s}=e.body;if(s&&s.frames)for(let r=0;r<s.frames.length;r++){const{filename:n}=s.frames[r];if(n){const a=Fr.exec(n);a!==null&&a[1]&&(s.frames[r].filename=`${Ur}${a[1]}`)}}}function kr(e,t){let s="";return typeof window<"u"&&(s=window.location.toString()),{message:{source:"client",...e},context:{sessionKey:gt,url:s,...t}}}function pt(e){const t={...q.client.rollbar.notifier,transform:Ar,payload:{...q.client.rollbar.notifier.payload,sessionKey:gt,context:e,person:{id:""}}},s={...q.client.sumoLogger,sourceName:e},r=Vt(Ve,t,q.client.rollbar.global),n=Wt(Ve,s),a=[r,n];return new zt({...q.client.logger,transports:a,transforms:[kr]})}function Oe(){return pt("favorites")}function Nr(e){const t={fullProductOptions:null,productOptions:null};try{const{merchandisingSelections:s}=e,{fullProductOptions:r,productOptions:n}=s;t.fullProductOptions=r?JSON.parse(r):{...s},t.productOptions=n?JSON.parse(n):{...s}}catch(s){Oe().error(s)}return t}function Tr(e){if(!e.previewInfo||e.previewInfo==="null")return null;try{return JSON.parse(e.previewInfo)}catch(t){Oe().error(t)}return null}function We(e){const{merchandising:t,design:s}=e,r=Nr(t),n=Tr(s.metadata);return{...e,design:{...s,metadata:{...s.metadata,previewInfo:n}},merchandising:{...t,merchandisingSelections:r}}}function Mr(e){const{merchandising:t,design:s}=e;return{...e,design:{...s,metadata:{...s.metadata,previewInfo:JSON.stringify(s.metadata.previewInfo)}},merchandising:{...t,merchandisingSelections:{...t.merchandisingSelections,fullProductOptions:JSON.stringify(t.merchandisingSelections.fullProductOptions),productOptions:JSON.stringify(t.merchandisingSelections.productOptions)}}}}const W=window.__GALLERY_CONFIG__;class Gr extends z{constructor({version:s,...r},n){super(r,n);k(this,"apiVersion");this.apiVersion=s}async addFavorite(s,r,n,a){const o=`/api/${this.apiVersion}/works`;if(n===void 0||a===void 0)throw new R({favorite:r,url:o,message:"Unable to call addFavorite, no ownerId and/or accessToken provided"});try{return(await this.api.post(o,r,{headers:{Authorization:`Bearer ${a}`},params:{ownerId:n,tenant:s,from:W.appName}})).data.workId||"0"}catch(i){throw new R({favorite:r,url:o,message:`Bad response from WES: ${i.message}`},i)}}async removeFavorite(s,r){const n=`/api/${this.apiVersion}/works/${s}/delete`;if(r===void 0)throw new R({favoriteId:s,url:n,message:"Unable to call removeFavorite, no accessToken provided"});try{return(await this.api.delete(n,{headers:{Authorization:`Bearer ${r}`},params:{from:W.appName}})).status}catch(a){throw new R({url:n,message:`Bad response from WES: ${a.message}`},a)}}async setFavoriteVisibility(s,r,n){const a=`/api/${this.apiVersion}/works/${s}/setVisible`;if(n===void 0)throw new R({favoriteId:s,url:a,message:"Unable to call setVisible, no accessToken provided"});try{const o={hidden:r};return(await this.api.patch(a,o,{headers:{Authorization:`Bearer ${n}`},params:{from:W.appName}})).status}catch(o){throw new R({url:a,message:`Bad response from WES: ${o.message}`},o)}}async getFavorite(s,r){const n=`/api/${this.apiVersion}/works/${s}`;if(!r)throw new R({favoriteId:s,url:n,message:"Unable to call getFavorite, no accessToken provided"});try{const a=await this.api.get(n,{headers:{Authorization:`Bearer ${r}`},params:{from:W.appName}});return We(a.data)}catch(a){throw new R({url:n,message:`Bad response from WES: ${a.message}`},a)}}async getFavoritesPage(s,r,n,a,o,i,l){const u="/api/v2/works:search";if(!o||!i)throw new R({url:u,message:"Unable to call getFavoritesPage, no ownerId and/or accessToken provided"});try{return(await this.api.get(u,{headers:{Authorization:`Bearer ${i}`,"Cache-Control":"max-age=0, no-cache, no-store"},params:{tenants:a,pageSize:r,pageNumber:n,ownerId:o,workName:s,sortBy:"LastCreated",from:W.appName,productKey:l||void 0}})).data.map(d=>We(d))}catch(g){throw new R({url:u,message:`Bad response from WES: ${g.message}`},g)}}async getFavoritesCount(s,r,n,a){const o="/api/v2/works/filteredCount";if(!r||!n)throw new R({url:o,message:"Unable to call getFavoritesCount, no ownerId and/or accessToken provided"});try{return(await this.api.get(o,{headers:{Authorization:`Bearer ${n}`,"Cache-Control":"max-age=0, no-cache, no-store"},params:{tenants:s,ownerId:r,from:W.appName,productKey:a}})).data}catch(i){throw new R({url:o,message:`Bad response from WES: ${i.message}`},i)}}async getAllFavorites(s,r,n,a,o){const l=(await this.getFavoritesCount(r,n,a,o)).ownedWorks;let u=[];const d=(l<=100?Array.from(Array(Math.ceil(l/50)).keys()):[0,1]).map(p=>this.getFavoritesPage(s,50,p,r,n,a,o));return u=(await Promise.all(d)).flat(),u?.map(p=>({...p,isFavorite:!0}))}}const Ie=new Gr(W.services.wesService,Oe),xn="favoritesByProductKey",Cn=e=>{const{queryKey:t}=e,[s,{locale:r,wesTenant:n,ownerId:a,accessToken:o,productKey:i}]=t;return Ie.getAllFavorites(r,n,a,o,i)},$r=w.memo(e=>{const{className:t,children:s,...r}=e;return c.jsx($,{className:L("comparative-name",t),fontSize:"small",fontWeight:"bold",...r,children:s})});$r.displayName="ComparativeNameDisplay";const ve=e=>{const{children:t,className:s,...r}=e;return c.jsx("button",{className:L("clickable tile-action-area",s),...r,tabIndex:0,type:"button",children:t})};ve.displayName="TileActionArea";const mt=e=>{const{children:t,...s}=e;return c.jsx("div",{...s,className:"tile-content",children:t})};mt.displayName="TileContent";const Pe=e=>{const{children:t,className:s,...r}=e;return c.jsx("div",{className:L("tile-header",s),...r,children:t})};Pe.displayName="TileHeader";const ht=w.forwardRef((e,t)=>{const{type:s,className:r,...n}=e;return c.jsx("li",{className:L("tile",{[`${s}`]:!!s},r),...n,ref:t,children:e.children})});ht.displayName="Tile";const ae=e=>e?.startsWith("//")?`https:${e}`:e;function Se(e,t){const s=ae(e?.size1x),r=ae(e?.size2x);return e?`${s} 1x, ${r} 2x`:t}function jr(e,t){const[s]=w.useState(()=>({value:e,callback:t,facade:{get current(){return s.value},set current(r){const n=s.value;n!==r&&(s.value=r,s.callback(r,n))}}}));return s.callback=t,s.facade}const ft=w.memo(e=>{const{alt:t,aspectRatio:s,className:r,maxPreviewHeight:n,srcInfo:a,srcSet:o,width:i,...l}=e,u=Se(a,o),g=ae(a?.size2x),d=n[1];return c.jsx("img",{...l,alt:t,className:L("mcp-eager-image",r),crossOrigin:"anonymous",height:d||void 0,src:g,srcSet:u,width:i})});ft.displayName="EagerLoadingImage";const ze=e=>{try{const t=e?.split(", ").map(r=>r.substring(0,r.length-3));if(!t)throw new Error("No srcSet URLs");return t.map((r,n)=>{const a=new URL(r),o=a.searchParams.get("instructions_uri");if(!o)throw new Error("No instructions URI");const i=new URL(o),l=i.searchParams.get("documentUri");if(!l)throw new Error("No DTeR document URI");const u=new URL(l);if(!u.searchParams.get("customImages"))throw new Error("No custom images");return u.searchParams.delete("customImages"),i.searchParams.set("documentUri",u.toString()),a.searchParams.set("instructions_uri",i.toString()),`${a.toString()} ${n+1}x`}).join(",")}catch{return}};function Y(){return pt("gallery")}const Hr=({size:e="default"})=>{const t=V(),s=e==="large",r=s?"x2":"xm1";return c.jsxs("span",{className:"fallback-preview",children:[!s&&c.jsx("svg",{className:"swan-icon-size-60p",fill:"none",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M13 3V13H3V3H13ZM12.6667 2H3.33333C2.6 2 2 2.6 2 3.33333V12.6667C2 13.4 2.6 14 3.33333 14H12.6667C13.4 14 14 13.4 14 12.6667V3.33333C14 2.6 13.4 2 12.6667 2ZM9.42667 7.90667L7.42667 10.4867L6 8.76L4 11.3333H12L9.42667 7.90667Z",fill:"#9e9e9e"})}),c.jsx($,{className:"fallback-preview-text",component:"span",fontSize:r,fontWeight:"bold",py:2,textAlign:"center",children:t("NoPreviewAvailable")})]})},Vr=w.memo(Hr),Wr=Y(),wt=w.memo(e=>{const{alt:t,className:s,maxPreviewHeight:r,isLoading:n,loading:a="lazy",metricImageType:o,srcInfo:i,srcSet:l,width:u,bypassedApproval:g,size:d,...h}=e,[f,p]=w.useState(Se(i,l)),[P,m]=w.useState(!1),[y,S]=w.useState(a==="lazy"),[E,v]=w.useState(!0),_=jr(null,N=>{S(!N?.complete)}),x=V(),U=ae(i?.size2x),D=at(()=>{v(y)},100);w.useEffect(()=>{const N=Se(i,l);if(N!==f){try{if(f!==void 0&&f===ze(N))return}catch(H){Wr.error(`Error reacting to src changes: ${H}`,H,{currentSrcSet:f,newSrcSet:N});return}m(!1),S(!0),p(N)}},[i,l]),w.useEffect(()=>{y?D():v(!1)},[y]);const A=w.useCallback(()=>{g||se.recordImageFailure({srcSet:l,...i});const N=ze(f);N&&p(N),m(!N),S(!1)},[g,f,l,i]),O=()=>{m(!1),S(!1)},C=!!E||!!n,F=C?r[0]??165:r[0],Q=a==="lazy"&&C||a==="eager"&&C&&y;return c.jsxs(c.Fragment,{children:[Q&&c.jsx("div",{style:{maxHeight:F},children:c.jsx("div",{className:"mcp-img-loading",children:c.jsx(ot,{accessibleText:x("Loading"),size:"standard"})})}),c.jsxs("span",{className:L("mcp-image-span","tile-preview-image"),hidden:a==="eager"&&!!C,children:[c.jsx(Fe,{appear:!0,mountOnEnter:!0,unmountOnExit:!0,classNames:"fade",in:P,timeout:500,children:c.jsx(Vr,{size:d})},f),c.jsx(Fe,{appear:!0,classNames:"fade",in:!C&&!P,timeout:500,children:c.jsx("img",{...h,alt:t,className:L("mcp-image",s),crossOrigin:"anonymous",height:F,loading:a,ref:_,src:U,srcSet:f,width:u,onError:A,onLoad:O})})]}),a==="eager"&&!!C&&c.jsx(ft,{className:"tile-preview-image",maxPreviewHeight:r,srcInfo:i,width:u,...h})]})});wt.displayName="McpImage";const yt=w.memo(e=>{const{previewWidth:t,previewsUrls:s,style:r={},maxPreviewHeight:n,bypassedApproval:a,...o}=e,i=n[1]||n[0];return c.jsx("div",{className:"tile-preview",style:{height:i,...r},children:c.jsx(wt,{bypassedApproval:a,className:"tile-preview-image",maxPreviewHeight:n,srcInfo:s,width:t,...o})})});yt.displayName="PreviewImage";function zr(){return Qt()}const Qr=zr(),Br=e=>{const{children:t,noFollow:s,to:r,shouldShowRevisedPdp:n,...a}=e,{search:o}=tt(),[i,l]=w.useState(o);return Qr?.listen(({location:u,action:g})=>{g==="PUSH"&&l(u.search)}),n?c.jsx("a",{href:`${r}`,style:{display:"inherit"},children:t}):c.jsx(Bt,{rel:s?"nofollow":void 0,style:{display:"inherit"},to:`${r}${i}`,...a,children:t})},qr=16,Kr=12,Xr={padding:`${qr}px ${Kr}px`},Jr=w.forwardRef((e,t)=>{const{children:s,Image:r=yt,imageProps:n,linkProps:a,onClick:o,onMouseEnter:i,imageStyleProps:l=Xr,maxHeight:u=Sr,className:g}=e,d=f=>{o&&o(f)},h={maxHeight:`${u}px`};return c.jsxs(ht,{className:g,ref:t,type:"design-tile",children:[a?c.jsx(Br,{...a,children:c.jsx(ve,{style:h,onClick:o,onKeyPress:d,onMouseEnter:i,children:c.jsx(Pe,{children:c.jsx(r,{...n,style:l})})})}):c.jsx(ve,{style:h,onClick:o,onKeyPress:d,onMouseEnter:i,children:c.jsx(Pe,{children:c.jsx(r,{...n,style:l})})}),c.jsx(mt,{children:s})]})});Jr.displayName="DesignTile";const _n=async({tenant:e,newFavorite:t,ownerId:s,accessToken:r})=>Ie.addFavorite(e,Mr(t),s,r),Rn=async({favoriteId:e,accessToken:t})=>Ie.removeFavorite(e,t),Et=w.memo(e=>{const{active:t,children:s,className:r,shoulHideMoreArrowIcon:n,...a}=e;return c.jsxs(De,{className:L("show-more-button","simple",r,{active:t}),iconPosition:"right",skin:"unstyled",...a,children:[s&&c.jsx($,{className:"show-more-text",fontSize:"small",fontWeight:"bold",children:s}),!n&&c.jsx(qt,{iconType:t?"caretUp":"caretDown"})]})});Et.displayName="ShowMoreButton";function vt(e){let t=5381,s=e.length;for(;s;)t=t*33^e.charCodeAt(s+=-1);return(t>>>0).toString()}const ge=4,Qe=3,pe=2,Zr=(e,t,s)=>{const r=s?pe:Qe,[n,a]=w.useState(!e),o=n?t:t.slice(0,ge),i=e&&t.length>ge,l=e&&t.length>r,u=s&&t.length>Qe,g=s&&t.length<pe,d=s&&t.length<pe?t.length-r:t.length-ge;return w.useEffect(()=>{a(!e)},[e]),{shouldShowMore:n,visibleSwatches:o,shouldShowMoreMobile:l,shouldHideTwoLastItems:u,shouldHideLastItem:g,colorSwatchesLength:d,setShouldShowMore:a,mobileMaxColorSwatchesToShow:r,shouldShowMoreButton:i}};function Yr(e){return vt(e.map(t=>t.designId).join(""))}const es=w.memo(e=>{const{ariaLabelledBy:t,collapse:s=!1,colorSwatches:r,colorSwatchesProps:n={},entityId:a=null,onLabelClick:o,onColorSwatchChange:i,selectedDesignId:l,locale:u,title:g,shouldShowMerchModules:d}=e,h=V(),f=`colors-${a||Yr(r)}`,{shouldShowMore:p,visibleSwatches:P,shouldShowMoreMobile:m,shouldHideTwoLastItems:y,shouldHideLastItem:S,colorSwatchesLength:E,setShouldShowMore:v,mobileMaxColorSwatchesToShow:_,shouldShowMoreButton:x}=Zr(s,r,d),U=()=>v(!p),D=A=>{const O=A?.toString()||"";i(O)};return c.jsxs(c.Fragment,{children:[r.length<=1&&null,r.length>1&&c.jsxs("div",{"aria-labelledby":t,className:L("color-swatch-picker",{"hide-last-child":m,"merch-color-swatch-picker":d,"hide-two-last-items":y,"hide-last-item":S}),children:[g&&g(),c.jsx(Kt,{"aria-label":h("ColorSwatchGroupLabel"),selectedValue:l,variant:"single-select",onSelectedValueChange:D,children:c.jsx(Xt,{id:f,...n,children:P.map(A=>{const{color:O,designId:C}=A,F=O?Jt(O,{culture:u,colorPalette:"gallery"}):void 0;return c.jsx(Zt,{"aria-label":F,value:C,children:c.jsx(Yt,{children:c.jsx(er,{as:"span",primaryColor:O,title:F,children:F&&c.jsx("span",{className:"screen-reader-text",children:F})})})},C)})})}),m&&c.jsx(tr,{className:"show-more-badge mobile",onClick:o,children:`+${r.length-_}`}),x&&c.jsx(Et,{active:p,"aria-controls":f,"aria-expanded":p,"aria-label":h("ColorSwatchShowMoreAriaLabel"),className:L("tablet desktop",{"disable-click":d}),shoulHideMoreArrowIcon:d,onClick:U,children:`+ ${E}`})]})]})});es.displayName="ColorSwatchPicker";var ts=(e=>(e.ContentBackgroundColor="ContentBackgroundColor",e.DisableFullBleed="DisableFullBleed",e.ShowComparativeNames="ShowComparativeNames",e.PricingDisplay="PricingDisplay",e.TilePreviewSize="TilePreviewSize",e.UseFakeFamily="UseFakeFamily",e.PricingPresentationType="PricingPresentationType",e.FullBleedUploadPopExperience="FullBleedUploadPopExperience",e.DefaultPageSize="DefaultPageSize",e.VortexEnabled="VortexEnabled",e.ImageCacheVersion="ImageCacheVersion",e.Favorites="Favorites",e.IconographyEnabled="IconographyEnabled",e.ShowBreadcrumbs="ShowBreadcrumbs",e.ShowProductHeaderInfo="ShowProductHeaderInfo",e.ShowRatings="ShowRatings",e.ShowFAQs="ShowFAQs",e.ShowProductInfo="ShowProductInfo",e.ShowQuicklinks="ShowQuicklinks",e.ShowTLPL0Quicklink="ShowTLPL0Quicklink",e.ShowProductOptionsDescription="ShowProductOptionsDescription",e.ShowPhotoPersonalization="ShowPhotoPersonalization",e.PhotoPersonalizationImage="PhotoPersonalizationImage",e.QuickStudioStatus="QuickStudioStatus",e.SceneSource="SceneSource",e.DisableFullBleedUploadForFoilColor="DisableFullBleedUploadForFoilColor",e.VortexPreviewAnimation="VortexPreviewAnimation",e))(ts||{});function rs(e){const t=Object.entries(e).sort(([s],[r])=>s>r?1:-1);return vt(JSON.stringify(t))}var K=(e=>(e.ATTRIBUTE="attribute",e.ATTRIBUTE_PLURAL="attributes",e.CATEGORY="category",e.CATEGORY_PLURAL="categories",e.KEYWORD="keyword",e.COLLECTION="collection",e))(K||{}),ss=(e=>(e.CHECKBOX="checkbox",e.RADIO="radio",e.COLOR="color",e.FLAT_TAXONOMY="flattaxonomy",e.FACETED_TAXONOMY="facetedtaxonomy",e.UNKNOWN="unknown",e))(ss||{}),ns=(e=>(e.RADIO="radio",e))(ns||{}),as=(e=>(e.DesignTile="DesignTile",e.QuickStudio="QuickStudio",e.Quickview="Quickview",e.FavoritesTile="FavoritesTile",e.PhotoPersonalization="PhotoPersonalization",e))(as||{}),os=(e=>(e.SELECT_COLOR_SWATCH="SelectColorSwatch",e.OPEN_QUICKVIEW="OpenQuickview",e.GALLERY_DESIGN_ENGAGEMENT="Gallery Design Engagement",e.GALLERY_UPSELL_ENGAGEMENT="Gallery Upsell Engagement",e.GALLERY_QUICKSTUDIO_ENGAGEMENT="Gallery QuickStudio Engagement",e.FAVORITES_DESIGN_ENGAGEMENT="Favorites Design Engagement",e.FLY_OUT_CLICKED="Fly-Out Clicked",e.FLY_OUT_CLOSED="Fly-Out Closed",e.FLY_OUT_VIEWED="Fly-Out Viewed",e.NAVIGATION_CLICKED="Navigation Clicked",e.DESIGN_POPUP_DISPLAYED="Design PopUp Displayed",e.PRODUCT_VIEWED="Product Viewed",e.IMAGE_UPLOADED="Image Uploaded",e.BUTTON_CLICKED="Button Clicked",e.QUANTITY_ENGAGEMENT="Gallery Quantity Selector Engagement",e.FAVORITES_SIGN_IN="Favorites Sign-In Callout Clicked",e.EXPERIMENT_CLICKED="Experiment Clicked",e.SORTING_DROPDOWN_OPENED="Sorting Dropdown Opened",e.SORTING_DROPDOWN_CLOSED="Sorting Dropdown Closed",e.SORTING_DROPDOWN_SELECTED="Sorting Dropdown Selected",e.GALLERY_FILTER_ENGAGEMENT="Gallery Filter Engagement",e))(os||{}),is=(e=>(e.ALL="All",e.FAVORITES="Favorites",e.GALLERY="Gallery",e.FLY_OUT="Fly-Out",e.DESIGN_UPLOAD="Design - Upload",e))(is||{}),cs=(e=>(e.SELECT_COLOR_SWATCH="SelectColorSwatch",e.SELECT_DESIGN="SelectDesign",e.FLY_OUT_EVENT="Gallery Fly-out",e.FLY_OUT_VIEWED="Fly Out Viewed",e.FAVORITE_ADDED="FavoriteDesignAdded",e.FAVORITE_REMOVED="FavoriteDesignRemoved",e.FAVORITES_CTA="Content:Favorites CTA",e.OPTIONS_DISPLAYED="Options Display",e.OPTIONS_VALIDATION="Options Validation",e.REVIEW_FLY_OUT_EVENT="Gallery Review Fly-out",e.ADD_TO_CART="Review:AddToCart",e.PHOTO_PREVIEW_FLY_OUT="Content Hub Gallery Photo Preview Fly-out",e.PHOTO_PREVIEW_CLEAR="Clear Photo Preview",e.PHOTO_PREVIEW_SUCCESS="Success",e.PHOTO_PREVIEW_ERROR="Error",e.QUANTITY_CHANGED="QuantityChanged",e.QUANTITY_SELECTOR_OPENED="QuantitySelectorOpened",e.PHOTO_PREVIEW_SIGN_IN="Sign-in",e.FAVORITES_SIGN_IN="Sign-in",e.CAROUSEL_PREVIOUS_SLIDE="Previous slide",e.CAROUSEL_NEXT_SLIDE="Next slide",e.CAROUSEL_VIEW_ALL="View All",e))(cs||{}),ls=(e=>(e.FAVORITE_ADDED="FavoriteDesignAdded",e.FAVORITE_REMOVED="FavoriteDesignRemoved",e.REVIEW="Review",e.SHIPPING_NOT_INCLUDED="Shipping not included",e.PREVIEW_WITH_PHOTO="Preview with your Photo",e.UPLOAD_PHOTO="Upload Photo",e.APPLY_PHOTO="Apply Photo",e.PRIVACY_CLICKED="Privacy & Cookie Policy",e.MERCH_MODULES="Merch Modules",e))(ls||{}),us=(e=>(e.Content="content",e))(us||{}),X=(e=>(e.TILE="gallery",e.QUICKVIEW="quickview",e))(X||{});const Dn="myAccountPageSidebarContent",ds="default_quantities",On="iconography",In="search_suggestions";var xe=(e=>(e.BASE="Base",e.GALLERY="Gallery",e.TLP="TLP",e.PRODUCT_PAGE="ProductPage",e))(xe||{}),Pt=(e=>(e.GALLERY_SOURCED="GallerySourced",e.SCENE_LOOKUP_SOURCED="SceneLookupSourced",e))(Pt||{}),Ce=(e=>(e.DYNAMIC="Dynamic",e.VORTEX_RASTER="VortexRaster",e))(Ce||{}),gs=(e=>(e.DYNAMIC="Dynamic",e.STATIC="Static",e))(gs||{}),ps=(e=>(e.DEFAULT="default",e.HAPPY_HOLIDAYS="happyHolidays",e))(ps||{}),ms=(e=>(e.PROD="prod",e.DEV="dev",e))(ms||{}),hs=(e=>(e.UPSELL="upsell",e.DOWNSELL="downsell",e.NO_CHANGE="nochange",e))(hs||{});const te=window.__GALLERY_CONFIG__,Z=class{static buildDssInstructionsUri(t,s,r,n,a,o,i){const l=Z.buildDssUri(t,s,r,n,a,i),u=Z.buildTextPersonalizationUri(l,o,!0);return Z.buildInstructionsUri(u)}static buildTextPersonalizationUri(t,s,r=!1){if(Object.keys(s).length){const n=Object.entries(s).reduce((o,[i,l])=>(o[`personalizedText[${i}]`]=l,o),{}),a={documentUrl:t.replace("renderDocument","editDocument"),copyPlaceholders:r,...n};return`${te.client.rendering.galleryPersonalizationURL}?${G.stringify(a)}`}return t}static buildDssUri(t,s,r,n,a,o){const i=Object.entries(a).reduce((u,[g,d])=>(u[`optionSelections[${g}]`]=d,u),{}),l={culture:t,fullbleed:!1,templateToken:s,colorMode:"print",requester:te.appName,customImages:o.map(u=>JSON.stringify(u)),...i};return`${te.client.rendering.designSpecificationsURL}/v2/designDocuments/products/${r}/${n}?${G.stringify(l)}`}static buildInstructionsUri(t){const s={documentUri:t,type:"preview"};return`${te.client.rendering.udsBaseURL}/v2/transient/vp?${G.stringify(s)}`}};let J=Z;k(J,"createPersonalizedStudioUrl",(t,s)=>{const r=new URL(t).searchParams.get("documentUri");if(r){const n=new URL(s);n.searchParams.delete("template"),n.searchParams.delete("previewUrl");const a=new URL(r);return a.searchParams.delete("copyPlaceholders"),n.searchParams.set("documentUrl",a.toString()),n}return s});const St=[24,48,96],bn={page:1,pageSize:St[0],totalEntities:0,totalLayoutEntities:0,loadMoreCount:0};function re(e){return e?(Array.isArray(e)?e:[e]).map(t=>t===null?null:typeof t=="string"?t:t.toString()).filter(t=>t!==null):[]}function b(e){if(e==null)return e;const t=Array.isArray(e)?e[0]:e;return t===null?null:typeof t=="string"?t:t.toString()}function me(e){return e==null?e:e?parseInt(b(e),10):null}function Be(e){return e==null?e:e?parseFloat(b(e)):null}function fs(e){return!e.mpvId||!e.mpvId||e.mpv?null:e.mpvId||e.mpvId?b(e.mpvId):e.mpv?b(e.mpv):null}function he(e,t){return e[t]||{}}function qe(e,t){if(!e)return[];const s=e[t];return typeof s=="string"?s.split(","):Array.isArray(s)&&s.length?s.map(r=>typeof r=="string"?r:null).filter(r=>r!==null):[]}function xt(e){return{useConstraints:e.useConstraints===void 0?"true":e.useConstraints,...e}}function M(e){return b(e)?.toLowerCase()==="true"}function ws(e){const{query:t}=G.parseUrl(e,{arrayFormat:"comma"}),s=it.parse(e.split("?")[1],{ignoreQueryPrefix:!0}),r=xt(t);let n=me(r.pageSize);return n&&(n=Math.min(n,Math.max(...St))),{query:r,bypassApproval:M(r.bypassApproval),debug:M(r.debug),mpvId:fs(r),noCache:M(r.noCache),useConstraints:M(r.useConstraints),paging:{page:me(r.page),pageSize:n},quantity:me(r.qty),refinements:{[K.ATTRIBUTE_PLURAL]:qe(s,"attributes"),[K.CATEGORY_PLURAL]:re(r.categories),[K.KEYWORD]:b(r.keyword),[K.COLLECTION]:b(r.collection)},renderPropsOverride:he(s,"renderPropsOverride"),rankingStrategyOverride:b(r.rankingStrategyOverride),forcedRankingStrategyOverride:b(r.forcedRankingStrategyOverride),selectedOptions:he(s,"selectedOptions"),selectedProduct:b(r.selectedProduct),enableQuickStudio:M(r.enableQuickStudio),forceVariation:re(r.forceVariation),quickViewId:b(r.quickView),useRealisationEngineService:M(r.useRealisationEngineService),enrich:M(r.enrich),isProduct:M(r.isProduct),pageId:b(r.pageId),experienceType:b(r.experienceType),personalizedText:he(s,"personalizedText"),templatePurposes:qe(s,"templatePurposes"),tlpLevel:b(r.tlpLevel),sortingStrategy:b(r.sortingStrategy),imagePlaceholderAspectRatio:Be(r.imagePlaceholderAspectRatio),imagePlaceholderAspectRatioTolerance:Be(r.imagePlaceholderAspectRatioTolerance),placeholderPurposes:re(r.placeholderPurposes),useAlternateSearchProvider:M(r.useAlternateSearchProvider),searchBackend:b(r.searchBackend),source:b(r.source),designCreationTypes:re(r.designCreationTypes)}}function Ln(e){const{query:t,url:s}=G.parseUrl(e,{arrayFormat:"comma"}),r=xt(t);return{url:s,query:r,bypassApproval:M(r.bypassApproval),noCache:M(r.noCache)}}function ys(e,t,s){const{url:r,query:n={}}=G.parseUrl(e);return n[t]=s,G.stringifyUrl({url:r,query:n})}const Es=window.__GALLERY_CONFIG__,Ke="f8f8f8",vs={format:"auto",quality:"95",showerr:"true"},Xe=({backgroundColor:e,locale:t,templateToken:s,bypassApproval:r=!1,useFakeFamily:n=!1,finishType:a="None",imageCacheVersion:o=null,photoPreviewData:i=[]})=>{const l={backgroundColor:e,bypassApproval:r?"true":void 0,useFakeFamily:n,finishType:a,icv:o,customImages:i.map(u=>JSON.stringify(u))};return`${Es.client.rendering.templateRealizationBaseURL}/api/v2/templates/${s}/cultures/${t}/renderDocument?${G.stringify(l)}`},Ps=(e,t)=>{const s=e.searchParams.get("documentUri"),r={customImages:t.map(a=>JSON.stringify(a))},n=`${s}&${G.stringify(r)}`;e.searchParams.set("documentUri",n)},Je=({url:e,contentBackgroundColor:t,locale:s,templateToken:r,bypassApproval:n=!1,useFakeFamily:a=!1,finishType:o="None",previewWidth:i,aspectRatio:l,sceneUri:u,sceneSource:g,imageCacheVersion:d=null,photoPreviewData:h=[],sceneType:f,personalizedText:p,isPersonalizationSidebarEnabled:P=!1})=>{const m=new URL(e.startsWith("//")?`https:${e}`:e),y=g===Pt.SCENE_LOOKUP_SOURCED,S=f===Ce.VORTEX_RASTER,E=f===Ce.DYNAMIC,v=S?"renderingInstructionsUrl":"instructions_uri",_=m.searchParams.get(v);if(!_)throw new Error("No instructions URI");const x=new URL(_);function U(){E&&x.searchParams.set("ignoreProjection","true"),h.length>0&&Ps(x,h)}if(P){U();let C=Xe({backgroundColor:t,locale:s,templateToken:r,bypassApproval:n,useFakeFamily:a,finishType:o,imageCacheVersion:d,photoPreviewData:h});p&&(C=J.buildTextPersonalizationUri(C,p)),x.searchParams.set("documentUri",C)}else if(y)U();else{const C=Xe({backgroundColor:t,locale:s,templateToken:r,bypassApproval:n,useFakeFamily:a,finishType:o,imageCacheVersion:d,photoPreviewData:h});x.searchParams.set("documentUri",C)}let D=i;D>ee&&(D=ee),D/l>ee&&(D=Math.floor(ee*l));const A=u&&d?ys(u,"icv",d):u,O={...vs,category:h.length?"gal6CustomImages":"gal6",merchant_metadata:r,width:D.toString(),scene:A};O[v]=x.toString(),S?(O.bgColor=Ke,O.height=Math.round(D/l).toString()):O.bgcolor=Ke;for(const[C,F]of Object.entries(O))F!==void 0&&m.searchParams.set(C,F);return m.toString()},Un=(e,t,s,r,n,a,o,i,l=ye.DEFAULT,u=!1,g=null,d=[],h={},f="",p=0,P={})=>{let m=(l&&l===ye.LARGE?Cr:xr)*2;n===X.QUICKVIEW&&(m*=3);const y=e.scenes&&e.scenes[X.TILE]?.aspectRatio||e.aspectRatio||1,S=e.scenes&&e.scenes[X.TILE]?.uri||void 0,E=e.scenes&&e.scenes[X.TILE]?.sceneType,v={contentBackgroundColor:r,locale:t,templateToken:e.templateToken,bypassApproval:u,useFakeFamily:s,finishType:e.finishType,previewWidth:m,aspectRatio:y,imageCacheVersion:g,photoPreviewData:d,sceneUri:S,sceneType:E,sceneSource:o,personalizedText:h,isPersonalizationSidebarEnabled:i},_={size1x:Je({...v,url:a?.size1x}),size2x:Je({...v,url:a?.size2x})};return{previewInfo:e,previewWidth:m,aspectRatio:e.aspectRatio,previewsUrls:_,personalizedInstructionsUrl:Object.keys(h).length?J.buildDssInstructionsUri(t,e.templateToken,f,p,P,h,d):void 0}},Ze=window.__GALLERY_CONFIG__,Ss={};function Fn(e,t){return(e-1)*t}class An extends z{async getContent(t=Ss){const{attributes:s=[],bypassApproval:r,categories:n=[],locale:a,facetCategories:o,useRealisationEngineService:i,galleryName:l,keyword:u,collection:g,length:d,offset:h,selectedOptions:f,noCache:p,useConstraints:P,rankingStrategyOverride:m,forcedRankingStrategyOverride:y,designIds:S,templateTokenFeatureFlags:E,renderProps:v,templatePurposes:_,imagePlaceholderAspectRatio:x,imagePlaceholderAspectRatioTolerance:U,placeholderPurposes:D,searchBackend:A,useNewColorPalette:O,experimentFlags:C,configExperimentFlags:F,designCreationTypes:Q,...N}=t;if(!l)throw new Error('Parameter "galleryName" must be provided');const H=`v2/Galleries/${encodeURIComponent(l)}/Culture/${a}/Content`;try{const T=await this.api.get(H,{params:{attributes:s.map(B=>B.join(",")),bypassApproval:r,categories:n.map(B=>B.join(",")),facetCategories:o,useRealisationEngineService:i,keywords:[u],collection:g,limit:d,offset:h,requestor:p?Ze.noCacheRequestor:Ze.appName,noCache:p,useConstraints:P,rankingStrategyOverride:m,forcedRankingStrategyOverride:y,selectedOptions:f,designIds:S?.join(","),templateTokenFeatureFlags:E,renderProps:v,templatePurposes:_,imagePlaceholderAspectRatio:x,imagePlaceholderAspectRatioTolerance:U,placeholderPurposes:D,searchBackend:A,useNewColorPalette:O,experimentFlags:C,configExperimentFlags:F,designCreationTypes:Q,...N},paramsSerializer:B=>it.stringify(B,{arrayFormat:"repeat"})});if(!T||!T.data||typeof T.data=="string")throw new Lr({message:`Empty Response from content query. Status: ${T?.status}`,query:t,response:T,url:H});!u&&T.data.results.content.length<=0&&this.logger.warning(new R({url:H,message:"Zero content returned from content API",query:t}));const be=T.data;return be.requestUrl=H,be}catch(T){throw T.name==="InvalidResponseError"?T:new R({url:H,message:`Bad response from content service: ${T.message}`,query:t},T)}}}const fe=window.__GALLERY_CONFIG__;class xs extends z{constructor({version:s,...r},n){super(r,n);k(this,"apiVersion");this.apiVersion=s}async getDefaultQuantities(s,r,n,a){if(!n||!a)throw new Error("Unable to call getDefaultQuantities. productKey, and version are required ");const o=`v2/tenant/${s}/productKey/${n}/version/${a}/quantities`;try{return(await this.api.get(o,{params:{lower:!0,cultures:r,requestor:fe.appName},paramsSerializer:{indexes:null}})).data}catch(i){return this.logger.error(new R({url:o,message:"Bad response from msx service",response:i.response},i)),null}}async getIconography(s,r,n,a,o,i){const l=`v2/tenant/${n}/productKey/${s}/version/${r}/experienceandordering/attributesandvalues`;try{return(await this.api.get(l,{params:{requestor:fe.appName,cultures:a,imageTransformations:o||"width=200,height=200",iconTransformations:i||"width=32,height=32"}})).data}catch(u){return this.logger.error(new R({url:l,message:"Bad response from msx service",response:u.response},u)),null}}async getMsxData(s,r){const n=fe.appName,a=`v1/tenant/vistaprint/productKey/${s}/mpvs`;return(await this.api.get(a,{params:{requestor:n,cultures:r}})).data}}const Cs=window.__GALLERY_CONFIG__,_s=ds,Rs=new xs(Cs.services.msxService,Y),Ds=e=>{const{queryKey:t}=e,[s,{productKey:r,version:n,tenant:a,locales:o}]=t;return Rs.getDefaultQuantities(a,o,r,n)},Os=({locale:e,quantity:t,quantitiesData:s})=>{const r=s&&s[e]?.quantities;return t||r?.default},Is=window.__GALLERY_CONFIG__,bs=e=>{const{productKey:t,productVersion:s,locale:r,quantity:n}=e,{data:a}=oe([_s,{productKey:t,version:s,tenant:Is.tenant,locales:[r]}],Ds,{enabled:!!t&&!!s,staleTime:ut,cacheTime:dt});return{quantitiesData:a,productQuantity:Os({locale:r,quantity:n,quantitiesData:a})}},Ls="add",Us="remove";function Ye(e){return e?Us:Ls}const Fs=2e4,As=e=>{const{children:t,dismissed:s,dismissVisuallyHiddenLabel:r,onRequestDismiss:n,...a}=e,o=at(()=>n?.(),Fs);return w.useEffect(()=>{o()},[o]),c.jsxs(rr,{...a,dismissed:s,onRequestDismiss:n,children:[t,c.jsx(sr,{visuallyHiddenLabel:r})]})},kn=({onClick:e,isFavorite:t})=>{const s=V(),[r,n]=w.useState(!1),[a,o]=w.useState(t),[i,l]=w.useState(null),u=s(t?"FavoritesRemoveMessage":"FavoritesAddMessage");w.useEffect(()=>{o(t)},[t]);const g=async h=>{try{if(r)return;n(!0),o(!t),se.recordPageAction(ne.FAVORITE_BUTTON_CLICKED,{action:Ye(t)}),await e(h)}catch(f){l(s(t?"FavoritesRemoveErrorMessage":"FavoritesAddErrorMessage")),o(t),se.recordPageAction(ne.FAVORITES_UPDATE_FAILED,{info:f,action:Ye(t)})}finally{n(!1)}},d=()=>{l(null)};return c.jsxs(c.Fragment,{children:[i&&c.jsx(As,{toast:!0,className:"favorite-button-alert-box",dismissVisuallyHiddenLabel:s("DismissAlert"),skin:"error",onRequestDismiss:d,children:i}),c.jsx(nr,{className:L("favorite-button-area",{"favorite-button-area-no-pointer":r}),children:c.jsx(ar,{"aria-label":u,checked:a,className:"favorite-button",skin:"favorite",onClick:g})})]})},_e=e=>{const{lines:t,...s}=e;return c.jsxs("div",{...s,className:"price-block",children:[c.jsx("span",{className:"pricing-display-spacing-block",dangerouslySetInnerHTML:{__html:Me}}),t>1&&c.jsx("span",{className:"pricing-display-spacing-block",dangerouslySetInnerHTML:{__html:Me}})]})};_e.displayName="SpacingBlock";var Ct=(e=>(e.Uncontrolled="uncontrolled",e.Small="small",e.Large="large",e.Button="button",e))(Ct||{});const _t=e=>{const{circleColor:t="#dfdfdf",fragmentColor:s="#666666",variant:r="uncontrolled",centering:n=!1,className:a,...o}=e;let i=L(a,{"easel-loading-spinner-centering":n}),l=s;switch(r){case"button":l="#ffffff",i=L(i,"easel-loading-spinner-small");break;case"small":i=L(i,"easel-loading-spinner-small");break;case"large":i=L(i,"easel-loading-spinner-large");break}return c.jsxs("svg",{className:i,preserveAspectRatio:"xMidYMid",role:"status",viewBox:"0 0 100 100",...o,children:[c.jsx("circle",{cx:"50",cy:"50",fill:"none",r:"35",stroke:t,strokeDasharray:"164.93361431346415 56.97787143782138",strokeWidth:"10"}),c.jsx("circle",{cx:"50",cy:"50",fill:"none",r:"35",stroke:l,strokeDasharray:"164.93361431346415 56.97787143782138",strokeDashoffset:"56.97787143782138",strokeWidth:"10"})]})};_t.displayName="CircularLoader";const Re=w.memo(e=>{const t=V(),{animation:s="wave",className:r,component:n="span",height:a,isLoading:o,variant:i="text",width:l,...u}=e,g={width:l,height:a,...u.style};return c.jsxs(n,{className:L("skeleton",i,{[`${s}`]:s!==!1},r),...u,style:g,children:[i==="img"&&c.jsx("svg",{name:t("SkeletonName"),viewBox:"0 0 135 105",xmlns:"http://www.w3.org/2000/svg",children:c.jsxs("g",{children:[c.jsx("path",{className:"placeholder-element",d:"m0,-0.25l0,106.5l135.37,0l0,-106.5l-135.37,0l0,0zm124.465,94.953l-112.916,0l0,-83.404l112.916,0l0,83.404l0,0z"}),c.jsx("polygon",{className:"placeholder-element",points:"17.714996337890625,86.864990234375 41.08799743652344,62.295013427734375 49.84700012207031,66.0880126953125 77.47698974609375,36.66099548339844 88.35800170898438,49.675994873046875 93.26199340820312,46.71099853515625 119.82699584960938,86.864990234375"}),c.jsx("circle",{className:"placeholder-element",cx:"44.719",cy:"33.417",r:"10.21"})]})}),i==="img"&&o&&c.jsx(_t,{centering:!0,className:"circular-loader",variant:Ct.Small})]})});Re.displayName="Skeleton";const ks=1.5,Rt=w.memo(e=>{const{className:t,pricingPresentationType:s,isLoading:r,isError:n,pricingHtml:a,lines:o=s===I.RAW_PRICE?1:2,...i}=e;w.useEffect(()=>{document.documentElement.style.setProperty("--gallery-price-block-min-height",`${o*ks}rem`)},[o]);const l=a?rt.sanitize(a):"";return c.jsxs("span",{className:L("pricing-display",s,t),children:[r&&c.jsxs("span",{className:"price-block",children:[c.jsx(Re,{}),o>1&&c.jsx(Re,{})]}),!r&&!n&&a&&c.jsx($,{className:"price-block",dangerouslySetInnerHTML:{__html:l},...i,component:"span"}),!r&&!n&&!a&&c.jsx(_e,{lines:o}),!r&&n&&c.jsx(_e,{lines:o})]})},or);Rt.displayName="PricingDisplay";const Dt=ir({key:"pricingContextModule",default:null});async function Ns(e,t,s){const r=await s.render(t);return{[e]:r}}function Ts(e){switch(e){case I.AS_LOW_AS_PRICE_PER_PIECE:case I.RAW_PRICE:return le.default?new le.default:new le;case I.DIFFERENTIAL_PRICE_PER_UNIT:case I.QTY_DIFFERENTIAL_PRICE:return ce.default?new ce.default:new ce;case I.PRICE_PER_UNIT:case I.QTY_FROM_PRICE:default:return ie.default?new ie.default:new ie}}async function Ms(e,t,s=!1,r,n,a,o){if(!n)throw new Error("Unable to call getChoiceGroupsPricingText. pricingResponse from PCT is required");const i=new cr(t),l=Ts(e),u=Object.entries(n.choiceGroups).reduce((d,[h,f])=>{let p,P,m,y;const{priceCalculationFailed:S,totalListPrice:E,totalDiscountPrice:v,unitListPrice:_,unitDiscountedPrice:x,differentialListPrice:U,differentialDiscountPrice:D,differentialUnitListPrice:A,differentialUnitDiscountPrice:O}=f;if(S)throw new ReferenceError(`Price calculation failed: ${f.failureReason}`);if(!E)throw new ReferenceError(`No total list price returned for product ${n.productKey}`);if(!v)throw new ReferenceError(`No total discount price returned for product ${n.productKey}`);if(!_)throw new ReferenceError(`No unit list price returned for product ${n.productKey}`);if(!x)throw new ReferenceError(`No unit discount price returned for product ${n.productKey}`);switch(e){case I.AS_LOW_AS_PRICE_PER_PIECE:case I.PRICE_PER_UNIT:case I.DIFFERENTIAL_PRICE_PER_UNIT:p=_,P=x,m=A,y=O;break;case I.QTY_FROM_PRICE:case I.QTY_DIFFERENTIAL_PRICE:case I.QTY_STARTING_AT_PRICE:default:p=E,P=v,m=U,y=D;break}const C=r?m.taxed:m.untaxed,F=r?y.taxed:y.untaxed,Q=l.generateToken({culture:t,hideVatMessage:s,quantity:a,priceDifference:C,priceDifferenceDiscounted:F,listPrice:r?p.taxed:p.untaxed,discountPrice:r?P.taxed:P.untaxed,currency:n.currency,minimumFractionDigits:n.fractionDigits,vatInc:r||!1,hideShippingMessageInVatMessage:o||!1,zeroDisplayType:Ae.ZeroDisplayType.Zero,comparativeDisplayType:Ae.ComparativeDisplayType.CustomerFriendly},e);return d.push(Ns(h,Q,i)),d},[]),g=await Promise.all(u);return Object.assign({},...g)}const Gs="pricing_text",$s=e=>{const{queryKey:t}=e,[s,{pricingResponse:r,quantity:n,locale:a,vatInc:o,hideVatMessage:i,pricingPresentationType:l,hideShippingMessageInVatMessage:u}]=t;return Ms(l,a,i,o,r,n,u)},et=window.__GALLERY_CONFIG__;class js extends z{constructor({version:s,...r},n){super(r,n);k(this,"apiVersion");this.apiVersion=s}async getDifferentialPrice(s,r,n,a,o,i,l,u,g,d){if(!n||!r||!a)throw new Error("Unable to call getDifferentialPrice. quantity, productKey, and productVersion are required ");const h=Object.entries(o||{}).reduce((m,[y,S])=>{const E=Object.entries(S);return E.length?E.forEach(([v,_])=>{const x=`ChoiceGroups[${y}][${v}]`;m[x]=_}):m[`ChoiceGroups[${y}][]`]="",m},{}),f=Object.entries(d||{}).reduce((m,[y,S])=>(m[`Selections[${y}]`]=S,m),{}),p={ProductKey:r,Quantity:n,ProductVersion:a,Market:s,MerchantId:"vistaprint",PricingContext:i,CouponCode:l,EffectiveDateTime:u,CustomerGroups:g,...f,...h},P=`v4/prices/startingAt/differential?${G.stringify(p)}`;try{const m=await this.api.get(P,{params:{requestor:et.appName}});if(!m)throw new Error("response was empty");return m.data}catch(m){return this.logger.error(new R({url:P,message:`Bad response from differential pricing service: ${m.message}`,response:m.response},m)),null}}async getQuantityPrices(s,r,n,a,o,i){if(!n||!r||!a)throw new Error("Unable to call getQuantityPrices. quantities, productKey, and productVersion are required ");const l=Object.entries(i||{}).reduce((d,[h,f])=>(d[`Selections[${h}]`]=f,d),{}),u={ProductKey:r,ProductVersion:a,Market:s,MerchantId:"vistaprint",PricingContext:o,OptionalPriceComponents:"UnitPrice",Quantities:n,...l},g=`v4/prices/startingAt/estimated?${G.stringify(u)}`;try{const d=await this.api.get(g,{params:{requestor:et.appName}});if(!d)throw new Error("response was empty");return d.data}catch(d){return this.logger.error(new R({url:g,message:`Bad response from differential pricing service: ${d.message}`,response:d.response},d)),null}}}const Hs=window.__GALLERY_CONFIG__,Vs="differential_pricing",Ws=new js(Hs.services.productCatalogPricingService,Y),zs=async e=>{const{queryKey:t}=e,[s,{market:r,productKey:n,quantity:a,productVersion:o,choiceGroups:i,pricingContext:l,couponCode:u,effectiveDateTime:g,customerGroups:d,selections:h}]=t,f=[],p=Object.entries(i||{}),P=p.length?Object.keys(p[0][1]).length:1,m=i?Math.min(Math.floor(p.length/((JSON.stringify(i).length+p.length*P*25)/6e3)),Ge):Ge;for(let E=0;E<p.length;E+=m){const v=p.slice(E,E+m).reduce((x,[U,D])=>(x[U]=D,x),{}),_=Ws.getDifferentialPrice(r,n,a,o,v,l,u,g,d,h);f.push(_)}const y=await Promise.all(f),S=y.reduce((E,v)=>({...E,...v?.choiceGroups}),{});return{...y.reduce((E,v)=>({...E,...v}),{}),choiceGroups:S}},Qs=(e,t,s)=>{const r=e.choiceGroups&&Object.entries(e.choiceGroups).reduce((n,[a,o])=>(n[a]={...t,...o},n),{});return oe([Vs,{...e,choiceGroups:r}],zs,s)},Bs=e=>{const{productOptionsByProductKey:t,fullProductOptions:s,productKey:r,differentialPrice:n,productVersion:a,locale:o,market:i,quantity:l,pricingContext:u,retrievedPricingContext:g}=e,{productQuantity:d}=bs({productKey:r,productVersion:a,locale:o,quantity:l}),{data:h}=Qs({market:i,productKey:r,quantity:d,productVersion:a,choiceGroups:!!t&&!!r&&t[r]||{},pricingContext:u?.getEncodedContextString(),effectiveDateTime:g?.effectiveDateTime,couponCode:u?.getCouponCode(),customerGroups:g?.customerGroups,selections:n?s:void 0},s,{enabled:!!d&&!!r&&!!a,staleTime:ut,cacheTime:dt});return{differentialPriceData:h,productQuantity:d}},qs=e=>{switch(e){case I.AS_LOW_AS_PRICE_PER_PIECE:case I.PRICE_PER_UNIT:return I.DIFFERENTIAL_PRICE_PER_UNIT;case I.QTY_FROM_PRICE:case I.RAW_PRICE:default:return I.QTY_DIFFERENTIAL_PRICE}},Ks=w.memo(e=>{const{productOptionsByProductKey:t,productOptionsHash:s,hideVatMessage:r,hideShippingMessageInVatMessage:n,pricingPresentationType:a,productKey:o,productVersion:i,lines:l,differentialPrice:u,selectedProductOptions:g,fullProductOptions:d,locale:h,market:f,quantity:p,pricingPresentationHTMLModifier:P=F=>F,className:m,...y}=e,S=lr(Dt),E=S?.getPricingContext(),v=u&&a?qs(a):a,{differentialPriceData:_,productQuantity:x}=Bs({productOptionsByProductKey:t,productKey:o,productVersion:i,differentialPrice:u,fullProductOptions:d,locale:h,market:f,quantity:p,pricingContext:S,retrievedPricingContext:E}),U=!!_&&!!o&&!!i&&!!x,{isLoading:D,isError:A,data:O}=oe([Gs,{pricingResponse:_||void 0,quantity:x,locale:h,vatInc:E?.vatInclusive||!1,hideVatMessage:r||u,pricingPresentationType:v||"",hideShippingMessageInVatMessage:n||!1}],$s,{enabled:U}),C=s||rs(g||{});return c.jsx(Rt,{className:m,isError:A,isLoading:D,lines:l,pricingHtml:C&&O?P(O[C]):void 0,pricingPresentationType:v,...y})});Ks.displayName="ContextualBatchPricingDisplay";const Xs=()=>{const e=V();return c.jsx("div",{className:"loading-spinner",children:c.jsx(ot,{accessibleText:e("Loading"),size:"super"})})};Xs.displayName="LoadingSpinner";class Js extends z{async getCareCalloutDetails(t,s){const r=`v1/Callout/${t}?services=Standard&mpvId=${s??""}`;try{const n=await this.api.get(r),{channelData:a,serviceConfig:o,translations:i,urls:l,temporarilyOutOfStock:u}=n.data;return{carePhone:a,translations:i,urls:l,designServicesAvailable:o?.Standard?.status==="Available"&&!u,designServicesFree:o?.Standard?.price?.discountedPrice===0}}catch(n){return this.logger.error(new R({url:r,message:`Bad response from care channel provider service: ${n.message}`,response:n.response},n)),null}}}const Zs=window.__GALLERY_CONFIG__,Ys=Zs.services,en=new Js(Ys.careCalloutService,Y),tn="careCalloutDetails",rn=e=>{const{queryKey:t}=e,[s,{locale:r}]=t;return en.getCareCalloutDetails(r)},sn="/gs/images/404-ghost.svg",nn=e=>{const{resetErrorBoundary:t}=e,s=V(),r=w.useContext(ct),n=`/${r}/f`,{data:a}=oe([tn,{locale:r}],rn,{enabled:!!r,retry:1});return c.jsxs(c.Fragment,{children:[c.jsx("img",{alt:"",className:L("not-found-icon"),src:sn}),c.jsx($,{className:"error-help",fontSize:"standard",fontWeight:"normal",textAlign:"center",children:s("NotFoundTitle")}),c.jsx("div",{className:"retry-button",children:c.jsx(De,{render:o=>c.jsx(st,{className:o.className,href:n,onClick:t,children:o.children}),skin:"primary",children:s("TryAgainCTA")})}),a&&a.carePhone&&c.jsx("section",{"aria-label":s("CareRegionLabel"),className:"care-callout",children:c.jsxs($,{className:"care-callout-text",component:"p",children:[c.jsxs("strong",{children:[a.translations.gallery.careTitle,""]}),a.translations.gallery.careSubTitle.replace("<phone />",a.carePhone.phoneNumber),"-- ",a.carePhone.shortFormatSchedule.map(o=>`${o} `)]})})]})};nn.displayName="NotFound";const Nn=(e,t)=>{const s=ur(Dt);w.useEffect(()=>{const r={isDevelopmentMode:!1,market:e,merchantId:t};j.initializePricingContext(r,()=>{s({...window.document.pcxtV3})}),j.executeAfterPricingContextEvent(j.EVENTS.VAT_INCLUSIVITY_CHANGE_EVENT,()=>s({...window.document.pcxtV3}),!0),j.executeAfterPricingContextEvent(j.EVENTS.DATE_TIME_CHANGE_EVENT,()=>s({...window.document.pcxtV3}),!0),j.executeAfterPricingContextEvent(j.EVENTS.CONTEXT_CHANGE_EVENT,()=>s({...window.document.pcxtV3}),!0),j.executeAfterPricingContextEvent(j.EVENTS.COUPON_CHANGE_EVENT,()=>s({...window.document.pcxtV3}),!0)},[e,t,s])};function Tn(e){const t={message:e.message,event:e.eventName,url:window?.location?.href};se.recordPageAction(ne.SEGMENT_EVENT_FAILURE,t),Y().error("Segment event failed to send",null,t)}const we=window.__GALLERY_CONFIG__;class Ot extends z{async getContextFromUrl(t,s,r,n){return Promise.resolve({locale:s.toLowerCase(),id:t,designId:r,...ws(n)})}static resolveUrl(t,s,r){if(typeof t=="string"&&!r)throw new Error(`Found string "origin" (${origin}), but "path"is empty`);let n;if(typeof t=="string"){const a=t.startsWith("http://")||t.startsWith("https://")?t:`http://${t}`;n=new URL(r,a)}else n=t;return n.protocol="https",n.hostname=`gallery.vistaprint.${Ot.resolveTopLevelDomain(s)}`,n.port="",r&&(n.pathname=r),n}static getCurrentUrl(t,s,r){const n=s===xe.TLP||s===xe.PRODUCT_PAGE;return new URL(n&&r?r:t)}static resolveTopLevelDomain(t){return we.client.vistaprintTlds[t.toLowerCase()]}static buildHomepageUrl(t){const s=we.client.culturePrefix[t.toLowerCase()];let r=we.client.vistaprintRoot[t];return s&&(r+=`/${s}`),r}resolveHostHeader(t){if(t.headers&&"get"in t.headers)return t.headers.get("X-Forwarded-Host")||t.headers.get("x-forwarded-host")||t.headers.get("Host")||t.headers.get("Origin")||"";if(t.header)return t.header["X-Forwarded-Host"]||t.header["x-forwarded-host"]||t.header.host||t.header.origin||"";if(t?.req?.headers){const s=t?.req?.headers;return s["X-Forwarded-Host"]||s["x-forwarded-host"]||s.host||s.origin||""}return""}static resolveCtxUrl(t){return t.request&&t.request.originalUrl?t.request.originalUrl:t.request&&t.request.url?t.request.url:t.url?t.url:t.request&&t.request.ctx&&t.request.ctx.url?t.request.ctx.url:""}}export{St as $,z as A,Xs as B,An as C,gn as D,wr as E,kn as F,Dn as G,dn as H,un as I,Nn as J,mr as K,ct as L,Sr as M,nn as N,dr as O,I as P,xn as Q,ts as R,R as S,ye as T,Tn as U,Ln as V,fn as W,cn as X,Ot as Y,mn as Z,K as _,ne as a,bn as a0,Fn as a1,ss as a2,yn as a3,Dr as a4,xe as a5,hs as a6,us as a7,ws as a8,En as a9,Sn as aA,J as aB,ms as aC,Pt as aa,ht as ab,Dt as ac,As as ad,Pe as ae,mt as af,Re as ag,wn as ah,pn as ai,Bs as aj,Lr as ak,In as al,M as am,Rr as an,_r as ao,Pn as ap,ps as aq,_t as ar,Ct as as,ns as at,hn as au,xs as av,On as aw,js as ax,Vs as ay,yt as az,ln as b,rs as c,bs as d,Un as e,X as f,Y as g,os as h,se as i,cs as j,gs as k,as as l,Ne as m,Qr as n,Jr as o,$r as p,Ks as q,es as r,is as s,ls as t,V as u,Oe as v,_n as w,Rn as x,Cn as y,vn as z};
//# sourceMappingURL=GalleryUrlService-3a87b315.js.map
